<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title></title>
<script src="static/js/pc/dest/jquery-1.11.3.min.js" type="text/javascript"></script>

</head>
<body>
       <input type="file" id="conter">
       <img src="" alt="" id="fileImg" height="100" width="100">
</body>
<script type="text/javascript">

$('#conter').change(function(){
	// $("#conter").val(); //这样就能获取它的值了（也就是内容）
	// $("#fileImg").attr('src',$("#conter").val()); //这样就能获取它的值了（也就是内容）
	// console.info($("#conter").val());
	// console.info($("#conter").fileImg);
	 run(this, function (data) {  
	 	//console.info('data',data);
        $('#fileImg').attr('src', data);  
    });  
	
})

 function run(input_file, get_data) {  
    /*input_file：文件按钮对象*/  
    /*get_data: 转换成功后执行的方法*/  
    if (typeof (FileReader) === 'undefined') {  
        alert("抱歉，你的浏览器不支持 FileReader，不能将图片转换为Base64，请使用现代浏览器操作！");  
    } else {  
        try {  
            /*图片转Base64 核心代码*/  
            var file = input_file.files[0];  
            //这里我们判断下类型如果不是图片就返回 去掉就可以上传任意文件  
            if (!/image\/\w+/.test(file.type)) {  
                alert("请确保文件为图像类型");  
                return false;  
            }  
            var reader = new FileReader();  
            reader.onload = function () {  
                get_data(this.result);  
            }  
            reader.readAsDataURL(file);  
        } catch (e) {  
            alert('图片转Base64出错啦！' + e.toString())  
        }  
    }  
}  

</script>
<script>
    $('#editbg').change(function () {
        //console.log($('#editbg').val());
        run(this, function (data) {
            //console.info('data:', data);
            $('#tribe-cartoon').css({
                backgroundImage:"url("+ data+")"
            });
        });

    });

    function run(input_file, get_data) {
        /*input_file：文件按钮对象*/
        /*get_data: 转换成功后执行的方法*/
        if (typeof (FileReader) === 'undefined') {
            alert("抱歉，你的浏览器不支持 FileReader，不能将图片转换为Base64，请使用现代浏览器操作！");
        } else {
            try {
                /*图片转Base64 核心代码*/
                var file = input_file.files[0];
                //这里我们判断下类型如果不是图片就返回 去掉就可以上传任意文件
                if (!/image\/\w+/.test(file.type)) {
                    alert("请确保文件为图像类型");
                    return false;
                }
                var reader = new FileReader();
                reader.onload = function () {
                    get_data(this.result);
                }
                reader.readAsDataURL(file);
            } catch (e) {
                alert('图片转Base64出错啦！' + e.toString())
            }
        }
    }
</script>

<script>
    //    $('body').delegate('#editbg input','change',function(){
    //        var bgimg=$('#editbg input').val();
    //        console.log($('#editbg input').val());
    //        $('body').css({
    //            "background-color":'#000'
    //            backgroundImage:"url("+bgimg+") --allow-file-access-from-files"
    //        });
    //    });</script>
</html>
