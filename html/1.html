var data = [
{"id": 1001, "name": '可口可乐', "price": 2.5, "count": 3000},
{"id": 1003, "name": '百事可乐', "price": 2.5, "count": 5000},
{"id": 1011, "name": '非常可乐', "price": 2.3, "count": 1000}
];
var categories=[
{"id":10,"name":'小说',"children":
[
{"id":101,"name":'文学剧本'},
{"id":102,"name":'网络小说'},
{"id":103,"name":'童话故事'}
]
},
{"id":20,"name":'诗歌',"children":
[
{"id":201,"name":'散文'},
{"id":202,"name":'散文集'},
{"id":203,"name":'诗歌集'}
]
},
{"id":30,"name":'搞笑',"children":
[
{"id":301,"name":'段子'},
{"id":302,"name":'笑话'}
]
},
{"id":30,"name":'脚本'},
{"id":30,"name":'人物形象'}
];
function createSelect(arr){
var select=document.createElement("select");
select.add(new Option("请选择",-1));
for(var i=0;i<arr.length;i++){
select.add(new Option(arr[i].name,arr[i].id));
}
var callee=arguments.callee;
select.onchange=function(){
//删除当前select之外的所有select
while(this.parentNode.lastElementChild!=this){
this.parentNode.removeChild(this.parentNode.lastElementChild);
}
var index=this.selectedIndex;

if(index>0){
var cate=arr[index-1];
if(cate.children){
callee(cate.children)
}

}
}
category.appendChild(select);
}


function createTable() {
var t = document.createElement("table");
var thead = t.createTHead();
var tr = thead.insertRow();
for (var key in data[0]) {
var td = tr.insertCell();
td.innerHTML = key;
}
var td = tr.insertCell();
td.innerHTML = "operate";
var tbody = t.createTBody();
for (var i = 0; i < data.length; i++) {
var tr = tbody.insertRow();
for (var key in data[i]) {
var td = tr.insertCell();
td.innerHTML = data[i][key];
}
var td = tr.insertCell();
var btn = document.createElement("button");
btn.innerHTML = "删除";
td.appendChild(btn);
btn.onclick = function () {
var pname = this.parentNode.parentNode.cells[1].innerHTML;
var r = confirm("继续删除 " + pname + " ?");
//获得当前行位置
if (r) {
var i = this.parentNode.parentNode.rowIndex;
//删除
document.querySelector("#date>table").deleteRow(i);
}

}

}

date.appendChild(t);
}